@import "tailwindcss";
@plugin "daisyui" {
  themes: all;
}

/* Prevent page-level scrolling/overscroll. OmniScreen manages its own internal scrolling. */
html,
body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

#root {
  height: 100%;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Base scrollbar app-wide: Destiny-style thin, rounded, transparent track, semi-transparent thumb */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.25) transparent;
}
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 4px;
}
*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.4);
}

/* Poll timer: animate transform (scaleX) for 60fps; width triggers layout and is choppy */
@keyframes poll-timer-shrink {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}
.poll-timer-bar {
  right: 0;
  left: auto;
  width: 100%;
  transform-origin: right;
  will-change: transform;
  animation: poll-timer-shrink var(--poll-duration) linear calc(-1 * var(--poll-elapsed)) both;
}

/* Embed dock and combined chat input bar: same height */
:root {
  --embed-dock-height: 36px;
}
.chat-input-bar,
.embed-dock-bar {
  min-height: var(--embed-dock-height);
}

/* Message input area: no padding */
.chat-input-bar {
  padding: 0;
}

/* Message input: focus outline renders inset */
.chat-input-bar .input:focus,
.chat-input-bar .input:focus-within {
  outline-offset: -1px;
}

/* Message input: regular border 1px inset */
.chat-input-bar .input {
  box-shadow: inset 0 0 0 1px var(--input-color);
}
.chat-input-bar .input:focus,
.chat-input-bar .input:focus-within {
  box-shadow: inset 0 0 0 1px var(--input-color);
}

/* Dock: embed label buttons â€“ bold, slightly larger text */
.embed-dock-bar .embed-dock-scroll .btn {
  font-weight: 600 !important;
  font-size: 1rem;
}

/* Dock: ~40% larger icons and text (right-side controls only, not embed buttons) */
.embed-dock-bar .embed-dock-controls .btn {
  font-size: 1.4rem;
}
.embed-dock-bar .embed-dock-controls .btn.text-xl {
  font-size: 1.75rem; /* 1.25 * 1.4 */
}

/* Cinema mode: center emoji/symbol content vertically in full-height control buttons */
.embed-dock-bar.embed-dock-cinema .embed-dock-controls .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

/* OmniScreen bottom dock: thin, unobtrusive horizontal scrollbar */
.embed-dock-scroll::-webkit-scrollbar {
  height: 0px; /* hide horizontal scrollbar track while keeping scroll behavior */
}

.embed-dock-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.embed-dock-scroll::-webkit-scrollbar-thumb {
  background-color: transparent;
}

.embed-dock-scroll {
  /* Hide scrollbar for Firefox while keeping scrolling enabled */
  scrollbar-width: none;
}

/* Combined chat: base .emote styles to match destiny.gg/embed/chat (chat.vendor.css).
   We load cdn.destiny.gg/emotes/emotes.css for per-emote images; this base rule ensures
   inline-block, overflow, and alignment match the embed. */

/* Emote vertical alignment: center the emote (50% of its height) with the text line center.
   Line height is 1.6em (see .msg-chat-content), so line center is 0.8em above baseline.
   translateY(50% - 0.8em) moves the emote down so its center aligns with that line center,
   so the emote overflows equally above and below the text. Emote stays on same line (no flex). */
.emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
}

.msg-chat .emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
  /* Align emote center with line center: 0.8em = half of line-height 1.6em */
  transform: translateY(calc(50% - 0.8em));
}

/* Embed tile shake when # link is clicked for an already-selected embed */
.embed-tile-shake {
  animation: embed-tile-shake 0.5s ease-in-out;
}
@keyframes embed-tile-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

/* Message body: relaxed line spacing so wrapped lines are readable.
   !important to override Tailwind .text-sm line-height inherited from parent.
   Unitless 1.6 so it scales with font-size and is clearly visible. */
.msg-chat .msg-chat-content {
  display: block;
  line-height: 1.6 !important;
}
.msg-chat .msg-chat-content .msg-chat-inner {
  display: block;
  line-height: 1.6 !important;
}
.msg-chat-greentext {
  font-size: inherit;
  line-height: 1.6 !important;
}

/* DGG flairs: CDN flairs.css sets .flair.<name> { background-image, height, width }. Base rule so icons display. */
.flair {
  display: inline-block;
  vertical-align: middle;
  background-repeat: no-repeat;
  background-position: center;
}

/* Own message: subtle highlight so your messages stand out (works in dark and light). */
.msg-chat.msg-own {
  background-color: rgba(255, 255, 255, 0.08);
  border-left: 2px solid rgba(255, 255, 255, 0.25);
}
[data-theme="light"] .msg-chat.msg-own,
[data-theme="pastel"] .msg-chat.msg-own {
  background-color: rgba(0, 0, 0, 0.06);
  border-left-color: rgba(0, 0, 0, 0.2);
}

/* Combo row: emote must not shrink so destiny.gg emotes.css dimensions apply correctly */
.msg-chat.msg-emote .emote {
  flex-shrink: 0;
}

/* Combo step classes (match original chat-gui _combo.scss): scale count font by combo size */
.msg-chat .chat-combo.x5 .count { font-size: 150%; }
.msg-chat .chat-combo.x10 .count { font-size: 200%; }
.msg-chat .chat-combo.x20 .count { font-size: 300%; }
.msg-chat .chat-combo.x30 .count { font-size: 400%; }
.msg-chat .chat-combo.x50 .count { font-size: 500%; }

/* Pause DGG emote CSS animations when off-screen (chat setting: Pause emote animations when off-screen) */
.emote-paused {
  animation-play-state: paused !important;
}

/* DGG autocomplete dropdown: render emote images same as chat */
.dgg-autocomplete-list .emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
  flex-shrink: 0;
}