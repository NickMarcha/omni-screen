@import "tailwindcss";
@plugin "daisyui" {
  themes: all;
}

/* Prevent page-level scrolling/overscroll. OmniScreen manages its own internal scrolling. */
html,
body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

#root {
  height: 100%;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Base scrollbar app-wide: thin, rounded, transparent track, semi-transparent thumb */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.25) transparent;
}
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 4px;
}
*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.4);
}

/* Poll timer: animate transform (scaleX) for 60fps; width triggers layout and is choppy */
@keyframes poll-timer-shrink {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}
.poll-timer-bar {
  right: 0;
  left: auto;
  width: 100%;
  transform-origin: right;
  will-change: transform;
  animation: poll-timer-shrink var(--poll-duration) linear calc(-1 * var(--poll-elapsed)) both;
}

/* Embed dock and combined chat input bar: same height */
:root {
  --embed-dock-height: 36px;
  /* Relaxed bar (py-2): min-height + vertical padding */
  --embed-dock-bar-relaxed-height: calc(var(--embed-dock-height) + 1rem);
}
.chat-input-bar,
.embed-dock-bar {
  min-height: var(--embed-dock-height);
}

/* Message input area: no padding */
.chat-input-bar {
  padding: 0;
}

/* Message input: focus outline renders inset */
.chat-input-bar .input:focus,
.chat-input-bar .input:focus-within {
  outline-offset: -1px;
}

/* Message input: regular border 1px inset */
.chat-input-bar .input {
  box-shadow: inset 0 0 0 1px var(--input-color);
}
.chat-input-bar .input:focus,
.chat-input-bar .input:focus-within {
  box-shadow: inset 0 0 0 1px var(--input-color);
}

/* Combined chat overlay: messages area has no border/outline; text has black outline for readability; slightly bolder text; message text fully white (greentext and .user flair keep their colors) */
.combined-chat-overlay-messages {
  border: none;
  outline: none;
  box-shadow: none;
  font-weight: 500;
  color: #fff;
}
.combined-chat-overlay-messages *:not(.msg-chat-greentext):not(.user):not(.user *):not(a) {
  color: #fff;
}
/* Overlay mode: colon after username on the same line, white */
.combined-chat-overlay-messages .msg-chat-overlay-colon {
  color: #fff;
}
/* Links in overlay: lighter blue so they’re visible and distinct from white text */
.combined-chat-overlay-messages a,
.combined-chat-overlay-messages a.link,
.combined-chat-overlay-messages a.link:visited {
  color: #93c5ff !important;
}
.combined-chat-overlay-messages a:hover,
.combined-chat-overlay-messages a.link:hover {
  color: #b8d9ff !important;
}
.combined-chat-overlay-messages,
.combined-chat-overlay-messages * {
  text-shadow:
    0 0 1px #000,
    0 0 1px #000,
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000,
    0 -1px 0 #000,
    0 1px 0 #000,
    -1px 0 0 #000,
    1px 0 0 #000;
}
/* Flair usernames: remove text-shadow (it paints on top of background-clip gradient); use drop-shadow on .user only so outline sits behind the gradient fill */
.combined-chat-overlay-messages .user,
.combined-chat-overlay-messages .user * {
  text-shadow: none;
}
.combined-chat-overlay-messages .user {
  filter:
    drop-shadow(0 0 1px #000)
    drop-shadow(0 0 2px rgba(0, 0, 0, 0.95))
    drop-shadow(0 0 3px rgba(0, 0, 0, 0.8));
}

/* Chat messages: scrollbar invisible unless recently scrolled */
.chat-messages-scroll::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 4px;
  transition: background 0.2s ease;
}
.chat-messages-scroll.chat-messages-scroll-visible::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
}
.chat-messages-scroll.chat-messages-scroll-visible::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.4);
}
.chat-messages-scroll {
  scrollbar-color: transparent transparent;
}
.chat-messages-scroll.chat-messages-scroll-visible {
  scrollbar-color: rgba(255, 255, 255, 0.25) transparent;
}

/* Overlay mode: input strip (input + inbox button) same background as embed dock bar */
.chat-overlay-input-strip,
.chat-overlay-input-strip-host {
  background-color: var(--color-base-200);
  min-height: var(--embed-dock-height);
}
.chat-overlay-input-strip-host {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Dock: embed label buttons – bold, slightly larger text */
.embed-dock-bar .embed-dock-scroll .btn {
  font-weight: 600 !important;
  font-size: 1rem;
}

/* Dock: slightly larger icon buttons (right-side controls only, not embed labels) */
.embed-dock-bar .embed-dock-controls .btn {
  font-size: 1.4rem;
}

/* Cinema mode: center emoji/symbol content vertically in full-height control buttons */
.embed-dock-bar.embed-dock-cinema .embed-dock-controls .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

/* OmniScreen bottom dock: thin, unobtrusive horizontal scrollbar */
.embed-dock-scroll::-webkit-scrollbar {
  height: 0px; /* hide horizontal scrollbar track while keeping scroll behavior */
}

.embed-dock-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.embed-dock-scroll::-webkit-scrollbar-thumb {
  background-color: transparent;
}

.embed-dock-scroll {
  /* Hide scrollbar for Firefox while keeping scrolling enabled */
  scrollbar-width: none;
}

/* Combined chat: base .emote styles to match primary chat embed.
   Per-emote images come from the chat source extension; this base rule ensures
   inline-block, overflow, and alignment match the embed. */

/* Emote vertical alignment: center the emote (50% of its height) with the text line center.
   Line height is 1.6em (see .msg-chat-content), so line center is 0.8em above baseline.
   translateY(50% - 0.8em) moves the emote down so its center aligns with that line center,
   so the emote overflows equally above and below the text. Emote stays on same line (no flex). */
.emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
}

.msg-chat .emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
  /* Align emote center with line center: 0.8em = half of line-height 1.6em */
  transform: translateY(calc(50% - 0.8em));
}

/* Stacking: embed grid and tiles in a layer explicitly below the chat overlay so iframe/video can't draw on top. */
.embed-grid-layer {
  position: relative;
  z-index: 0;
  isolation: isolate;
}
.embed-tile {
  position: relative;
  z-index: 0;
  isolation: isolate;
}
.chat-overlay-panel {
  isolation: isolate;
}

/* Embed tile shake when # link is clicked for an already-selected embed */
.embed-tile-shake {
  animation: embed-tile-shake 0.5s ease-in-out;
}
@keyframes embed-tile-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

/* Message body: relaxed line spacing so wrapped lines are readable.
   !important to override Tailwind .text-sm line-height inherited from parent.
   Unitless 1.6 so it scales with font-size and is clearly visible. */
.msg-chat .msg-chat-content {
  display: block;
  line-height: 1.6 !important;
}
.msg-chat .msg-chat-content .msg-chat-inner {
  display: block;
  line-height: 1.6 !important;
}
.msg-chat-greentext {
  font-size: inherit;
  line-height: 1.6 !important;
}

/* Primary chat flairs: extension flairs.css sets .flair.<name> { background-image, height, width }. Base rule so icons display. */
.flair {
  display: inline-block;
  vertical-align: middle;
  background-repeat: no-repeat;
  background-position: center;
}

/* Own message: subtle highlight so your messages stand out (works in dark and light). */
.msg-chat.msg-own {
  background-color: rgba(255, 255, 255, 0.08);
  border-left: 2px solid rgba(255, 255, 255, 0.25);
}
[data-theme="light"] .msg-chat.msg-own,
[data-theme="pastel"] .msg-chat.msg-own {
  background-color: rgba(0, 0, 0, 0.06);
  border-left-color: rgba(0, 0, 0, 0.2);
}

/* Combo row: emote must not shrink so extension emotes dimensions apply correctly */
.msg-chat.msg-emote .emote {
  flex-shrink: 0;
}

/* Combo step classes (match original chat-gui _combo.scss): scale count font by combo size */
.msg-chat .chat-combo.x5 .count { font-size: 150%; }
.msg-chat .chat-combo.x10 .count { font-size: 200%; }
.msg-chat .chat-combo.x20 .count { font-size: 300%; }
.msg-chat .chat-combo.x30 .count { font-size: 400%; }
.msg-chat .chat-combo.x50 .count { font-size: 500%; }

/* Pause primary chat emote CSS animations when off-screen (chat setting: Pause emote animations when off-screen) */
.emote-paused {
  animation-play-state: paused !important;
}

/* Primary chat autocomplete dropdown: render emote images same as chat */
.primary-chat-autocomplete-list .emote {
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -999em;
  vertical-align: middle;
  flex-shrink: 0;
}